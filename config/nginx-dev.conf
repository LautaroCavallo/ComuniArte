# nginx-dev.conf - Configuración para desarrollo (sin SSL ni backend)
server {
    listen 80;
    server_name localhost;

    # Health check
    location /health {
        access_log off;
        return 200 "OK\n";
        add_header Content-Type text/plain;
    }

    # MongoDB (solo para desarrollo - NO en producción)
    location /mongodb/ {
        allow 192.168.0.0/16;  # Solo IPs locales
        allow 172.16.0.0/12;   # Docker networks
        deny all;
        proxy_pass http://mongodb:27017/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    # Neo4j Browser
    location /neo4j/ {
        allow 192.168.0.0/16;  # Solo IPs locales
        allow 172.16.0.0/12;   # Docker networks
        deny all;
        proxy_pass http://neo4j:7474/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    # MinIO Console
    location /minio/ {
        allow 192.168.0.0/16;  # Solo IPs locales
        allow 172.16.0.0/12;   # Docker networks
        deny all;
        proxy_pass http://minio:9001/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    # Redis Commander
    location /redis/ {
        allow 192.168.0.0/16;  # Solo IPs locales
        allow 172.16.0.0/12;   # Docker networks
        deny all;
        proxy_pass http://redis-commander:8081/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}

